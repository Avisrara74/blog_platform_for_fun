{"ast":null,"code":"import { handleActions } from 'redux-actions';\nimport * as userActions from '../actions/user';\nimport * as articlesActions from '../actions/articles';\nimport * as authActions from '../actions/auth';\nimport { removeItemFromLocalstorage, setItemToLocalstorage } from '../../localstorage';\nconst userDataInitial = {\n  username: '',\n  token: '',\n  isAuthorized: false,\n  userProfileImage: undefined\n};\nexport const userData = handleActions({\n  [authActions.signInSuccess](state, action) {\n    const {\n      username,\n      token,\n      isAuthorized,\n      userProfileImage\n    } = action.payload;\n    setItemToLocalstorage('token', token);\n    setItemToLocalstorage('username', username);\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return {\n      username,\n      token,\n      isAuthorized,\n      userProfileImage\n    };\n  },\n\n  [userActions.editUserProfileSuccess](state, action) {\n    const {\n      username,\n      userProfileImage\n    } = action.payload;\n    removeItemFromLocalstorage('username');\n    setItemToLocalstorage('username', username);\n    removeItemFromLocalstorage('userProfileImage');\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return {\n      username,\n      userProfileImage\n    };\n  },\n\n  [authActions.logOutSuccess]() {\n    removeItemFromLocalstorage('token');\n    removeItemFromLocalstorage('username');\n    return userDataInitial;\n  }\n\n}, userDataInitial);\nexport const articles = handleActions({\n  [articlesActions.getArticlesProcess](state, action) {\n    return [...state, ...action.payload];\n  },\n\n  [articlesActions.refreshLikeInArticlesArray](state, {\n    payload\n  }) {\n    const currentArticleIndex = state.findIndex(el => el.id === payload);\n    const currentArticle = state[currentArticleIndex];\n    const changedArticle = { ...currentArticle,\n      favorited: !currentArticle.favorited,\n      favoritesCount: currentArticle.favorited ? currentArticle.favoritesCount - 1 : currentArticle.favoritesCount + 1\n    };\n    return [...state.slice(0, currentArticleIndex), changedArticle, ...state.slice(currentArticleIndex + 1)];\n  },\n\n  [articlesActions.createArticleSuccess]() {\n    return [];\n  },\n\n  [articlesActions.editArticleSuccess]() {\n    return [];\n  },\n\n  [articlesActions.removeArticleSuccess]() {\n    return [];\n  }\n\n}, []);\nexport const oneArticle = handleActions({\n  [articlesActions.getOneArticleSuccess](state, action) {\n    return { ...action.payload\n    };\n  }\n\n}, {});\nexport const likesStateOnServer = handleActions({\n  [articlesActions.addLikeSuccess](state, action) {\n    const elAlreadyHave = state.some(el => el.id === action.payload.id);\n\n    if (elAlreadyHave) {\n      const newState = state.map(el => el.id === action.payload.id ? { ...el,\n        isFavorited: action.payload.isFavorited\n      } : el);\n      return [...newState];\n    }\n\n    return [...state, { ...action.payload\n    }];\n  }\n\n}, []);","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/redux/reducers/dataReducers.js"],"names":["handleActions","userActions","articlesActions","authActions","removeItemFromLocalstorage","setItemToLocalstorage","userDataInitial","username","token","isAuthorized","userProfileImage","undefined","userData","signInSuccess","state","action","payload","editUserProfileSuccess","logOutSuccess","articles","getArticlesProcess","refreshLikeInArticlesArray","currentArticleIndex","findIndex","el","id","currentArticle","changedArticle","favorited","favoritesCount","slice","createArticleSuccess","editArticleSuccess","removeArticleSuccess","oneArticle","getOneArticleSuccess","likesStateOnServer","addLikeSuccess","elAlreadyHave","some","newState","map","isFavorited"],"mappings":"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","sourcesContent":["import { handleActions } from 'redux-actions';\nimport * as userActions from '../actions/user';\nimport * as articlesActions from '../actions/articles';\nimport * as authActions from '../actions/auth';\n\nimport { removeItemFromLocalstorage, setItemToLocalstorage } from '../../localstorage';\n\nconst userDataInitial = {\n  username: '', token: '', isAuthorized: false, userProfileImage: undefined,\n};\nexport const userData = handleActions({\n  [authActions.signInSuccess](state, action) {\n    const {\n      username, token, isAuthorized, userProfileImage,\n    } = action.payload;\n    setItemToLocalstorage('token', token);\n    setItemToLocalstorage('username', username);\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return {\n      username, token, isAuthorized, userProfileImage,\n    };\n  },\n  [userActions.editUserProfileSuccess](state, action) {\n    const { username, userProfileImage } = action.payload;\n    removeItemFromLocalstorage('username');\n    setItemToLocalstorage('username', username);\n    removeItemFromLocalstorage('userProfileImage');\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return { username, userProfileImage };\n  },\n  [authActions.logOutSuccess]() {\n    removeItemFromLocalstorage('token');\n    removeItemFromLocalstorage('username');\n    return userDataInitial;\n  },\n}, userDataInitial);\n\nexport const articles = handleActions({\n  [articlesActions.getArticlesProcess](state, action) {\n    return [...state, ...action.payload];\n  },\n  [articlesActions.refreshLikeInArticlesArray](state, { payload }) {\n    const currentArticleIndex = state.findIndex((el) => el.id === payload);\n    const currentArticle = state[currentArticleIndex];\n    const changedArticle = {\n      ...currentArticle,\n      favorited: !currentArticle.favorited,\n      favoritesCount: (currentArticle.favorited)\n        ? currentArticle.favoritesCount - 1\n        : currentArticle.favoritesCount + 1,\n    };\n    return [\n      ...state.slice(0, currentArticleIndex),\n      changedArticle,\n      ...state.slice(currentArticleIndex + 1),\n    ];\n  },\n  [articlesActions.createArticleSuccess]() {\n    return [];\n  },\n  [articlesActions.editArticleSuccess]() {\n    return [];\n  },\n  [articlesActions.removeArticleSuccess]() {\n    return [];\n  },\n}, []);\n\nexport const oneArticle = handleActions({\n  [articlesActions.getOneArticleSuccess](state, action) {\n    return { ...action.payload };\n  },\n}, {});\n\nexport const likesStateOnServer = handleActions({\n  [articlesActions.addLikeSuccess](state, action) {\n    const elAlreadyHave = state.some((el) => el.id === action.payload.id);\n    if (elAlreadyHave) {\n      const newState = state.map((el) => (\n        (el.id === action.payload.id) ? { ...el, isFavorited: action.payload.isFavorited } : el\n      ));\n      return [...newState];\n    }\n    return [...state, { ...action.payload }];\n  },\n}, []);\n"]},"metadata":{},"sourceType":"module"}