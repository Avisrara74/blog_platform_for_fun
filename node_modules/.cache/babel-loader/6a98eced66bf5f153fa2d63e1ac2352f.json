{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{signInSuccess}from'../redux/actions/auth';import PrivateRoute from'../react-router/private-route';import AuthRoute from'../react-router/auth-route';import Header from'./header';import SignIn from'./sign-in';import SignUp from'./sign-up';import EditProfile from'./edit-profile';import ArticlesList from'./articles-list';import Article from'./article';import EditArticle from'./edit-article';import CreateArticle from'./create-article';import{MainWrapper,ContentHeader,ContentWrapper,ContentBody,ContentAuth}from'../styled-components';import{mainUrl,createArticleUrl,signInUrl,signUpUrl,articleUrl,editArticleUrl,editProfileUrl}from'../routes';var mapStateToProps=function mapStateToProps(state){var userData=state.userData,articles=state.articles;var props={isAuthorized:userData.isAuthorized,userData:userData,articles:articles};return props;};var App=function App(props){var dispatch=props.dispatch,isAuthorized=props.isAuthorized;var authorizationCheck=function authorizationCheck(){if(localStorage.token===undefined)return;dispatch(signInSuccess({isAuthorized:true,token:localStorage.token,username:localStorage.username,userProfileImage:localStorage.userProfileImage}));};useEffect(function(){if(!isAuthorized)authorizationCheck();},[isAuthorized]);return/*#__PURE__*/React.createElement(MainWrapper,null,/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(ContentHeader,null,/*#__PURE__*/React.createElement(Header,null)),/*#__PURE__*/React.createElement(ContentWrapper,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:mainUrl},/*#__PURE__*/React.createElement(ContentBody,null,/*#__PURE__*/React.createElement(ArticlesList,null))),/*#__PURE__*/React.createElement(AuthRoute,{path:signInUrl},/*#__PURE__*/React.createElement(ContentAuth,null,/*#__PURE__*/React.createElement(SignIn,null))),/*#__PURE__*/React.createElement(AuthRoute,{path:signUpUrl},/*#__PURE__*/React.createElement(ContentAuth,null,/*#__PURE__*/React.createElement(SignUp,null))),/*#__PURE__*/React.createElement(PrivateRoute,{path:editProfileUrl},/*#__PURE__*/React.createElement(ContentAuth,null,/*#__PURE__*/React.createElement(EditProfile,null))),/*#__PURE__*/React.createElement(PrivateRoute,{path:createArticleUrl},/*#__PURE__*/React.createElement(ContentBody,null,/*#__PURE__*/React.createElement(CreateArticle,null))),/*#__PURE__*/React.createElement(Route,{path:editArticleUrl()},/*#__PURE__*/React.createElement(ContentBody,null,/*#__PURE__*/React.createElement(EditArticle,null))),/*#__PURE__*/React.createElement(Route,{path:articleUrl()},/*#__PURE__*/React.createElement(ContentBody,null,/*#__PURE__*/React.createElement(Article,null))),/*#__PURE__*/React.createElement(Route,{path:\"*\"},/*#__PURE__*/React.createElement(ContentBody,null,/*#__PURE__*/React.createElement(ArticlesList,null)))))));};App.defaultProps={dispatch:null,isAuthorized:false};export default connect(mapStateToProps,null)(App);","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/components/App.js"],"names":["React","useEffect","connect","BrowserRouter","Router","Switch","Route","signInSuccess","PrivateRoute","AuthRoute","Header","SignIn","SignUp","EditProfile","ArticlesList","Article","EditArticle","CreateArticle","MainWrapper","ContentHeader","ContentWrapper","ContentBody","ContentAuth","mainUrl","createArticleUrl","signInUrl","signUpUrl","articleUrl","editArticleUrl","editProfileUrl","mapStateToProps","state","userData","articles","props","isAuthorized","App","dispatch","authorizationCheck","localStorage","token","undefined","username","userProfileImage","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport { signInSuccess } from '../redux/actions/auth';\nimport PrivateRoute from '../react-router/private-route';\nimport AuthRoute from '../react-router/auth-route';\nimport Header from './header';\nimport SignIn from './sign-in';\nimport SignUp from './sign-up';\nimport EditProfile from './edit-profile';\nimport ArticlesList from './articles-list';\nimport Article from './article';\nimport EditArticle from './edit-article';\nimport CreateArticle from './create-article';\nimport {\n  MainWrapper, ContentHeader, ContentWrapper, ContentBody, ContentAuth,\n} from '../styled-components';\nimport {\n  mainUrl,\n  createArticleUrl,\n  signInUrl,\n  signUpUrl,\n  articleUrl,\n  editArticleUrl,\n  editProfileUrl,\n} from '../routes';\n\nconst mapStateToProps = (state) => {\n  const { userData, articles } = state;\n  const props = {\n    isAuthorized: userData.isAuthorized,\n    userData,\n    articles,\n  };\n  return props;\n};\n\nconst App = (props) => {\n  const { dispatch, isAuthorized } = props;\n  const authorizationCheck = () => {\n    if (localStorage.token === undefined) return;\n    dispatch(signInSuccess({\n      isAuthorized: true,\n      token: localStorage.token,\n      username: localStorage.username,\n      userProfileImage: localStorage.userProfileImage,\n    }));\n  };\n\n  useEffect(() => {\n    if (!isAuthorized) authorizationCheck();\n  }, [isAuthorized]);\n\n  return (\n    <MainWrapper>\n      <Router>\n        <ContentHeader>\n          <Header />\n        </ContentHeader>\n        <ContentWrapper>\n          <Switch>\n            <Route exact path={mainUrl}>\n              <ContentBody>\n                <ArticlesList />\n              </ContentBody>\n            </Route>\n\n            <AuthRoute path={signInUrl}>\n              <ContentAuth>\n                <SignIn />\n              </ContentAuth>\n            </AuthRoute>\n\n            <AuthRoute path={signUpUrl}>\n              <ContentAuth>\n                <SignUp />\n              </ContentAuth>\n            </AuthRoute>\n\n            <PrivateRoute path={editProfileUrl}>\n              <ContentAuth>\n                <EditProfile />\n              </ContentAuth>\n            </PrivateRoute>\n\n            <PrivateRoute path={createArticleUrl}>\n              <ContentBody>\n                <CreateArticle />\n              </ContentBody>\n            </PrivateRoute>\n\n            <Route path={editArticleUrl()}>\n              <ContentBody>\n                <EditArticle />\n              </ContentBody>\n            </Route>\n\n            <Route path={articleUrl()}>\n              <ContentBody>\n                <Article />\n              </ContentBody>\n            </Route>\n\n            <Route path=\"*\">\n              <ContentBody>\n                <ArticlesList />\n              </ContentBody>\n            </Route>\n          </Switch>\n        </ContentWrapper>\n      </Router>\n    </MainWrapper>\n  );\n};\n\nApp.propTypes = {\n  dispatch: propTypes.func,\n  isAuthorized: propTypes.bool,\n};\n\nApp.defaultProps = {\n  dispatch: null,\n  isAuthorized: false,\n};\n\nexport default connect(mapStateToProps, null)(App);\n"]},"metadata":{},"sourceType":"module"}