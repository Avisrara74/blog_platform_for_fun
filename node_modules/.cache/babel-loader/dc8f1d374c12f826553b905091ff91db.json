{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\src\\\\components\\\\article\\\\index.js\";\nimport React, { useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport * as actions from '../../redux/actions';\nimport { getDate } from '../../helper';\nimport { connect } from 'react-redux';\nimport { ArtickesLikeImg, ArticlesDate, ArticlesDescription, ArticlesHeader, ArticlesInfo, ArticlesItem, ArticlesLikesCount, ArticlesStats, ArticlesTag, ArticlesTagsWrap, articlesTitle, ArticlesUserImage, ArticlesUserInfo, ArticlesUserInfoGroup, ArticlesUsername, ArticleAuthorOptions, ArticleDeleteButton, ArticleEditButton, ArticlesUserInfoWrap, LoaderWrapper } from '../../styled-components';\nimport { articleUrl } from '../../routes';\nimport disabledLikeSrc from \"../../images/like-disabled.svg\";\nimport activeLikeSrc from \"../../images/like-active.svg\";\nimport Loader from 'react-loader-spinner';\n\nconst mapStateToProps = state => {\n  const {\n    articles,\n    userData,\n    oneArticle,\n    oneArticleState\n  } = state;\n  return {\n    articles,\n    username: userData.username,\n    isOneArticleReady: oneArticleState === 'finished',\n    oneArticle\n  };\n};\n\nconst actionCreator = {\n  getOneArticle: actions.getOneArticle\n};\n\nconst Article = props => {\n  const {\n    articles,\n    username,\n    getOneArticle,\n    oneArticle,\n    isOneArticleReady\n  } = props;\n  const {\n    slug\n  } = useParams();\n  const validSlug = slug.slice(1, slug.length);\n\n  const renderLoader = () => /*#__PURE__*/React.createElement(LoaderWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    type: \"Oval\",\n    color: \"rgb(82, 196, 26)\",\n    height: 200,\n    width: 200,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }));\n\n  useEffect(() => {\n    if (articles.length === 0) {\n      getOneArticle(validSlug);\n    }\n  }, []);\n\n  const renderArticle = data => {\n    let article;\n\n    if (Array.isArray(data)) {\n      article = data.find(el => el.slug === validSlug);\n    }\n\n    if (!Array.isArray(data)) {\n      if (!isOneArticleReady) return renderLoader();\n      article = data;\n    }\n\n    const {\n      author,\n      createdAt,\n      description,\n      favoritesCount,\n      favorited,\n      id,\n      tagList,\n      title\n    } = article;\n    const isCurrentUserAuthor = username === author.username;\n    const dateDiff = getDate(createdAt);\n\n    const renderTagList = () => tagList.map(tag => /*#__PURE__*/React.createElement(ArticlesTag, {\n      key: tag.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 28\n      }\n    }, tag.title));\n\n    const renderAuthorOptions = () => {\n      if (!isCurrentUserAuthor) return false;\n      return /*#__PURE__*/React.createElement(ArticleAuthorOptions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ArticleDeleteButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }, \"test\"), /*#__PURE__*/React.createElement(ArticleEditButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }\n      }, \"test\"));\n    };\n\n    return /*#__PURE__*/React.createElement(ArticlesItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ArticlesInfo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(ArticlesHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: articlesTitle,\n      to: articleUrl(slug),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, title), /*#__PURE__*/React.createElement(ArticlesStats, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ArtickesLikeImg, {\n      src: favorited ? activeLikeSrc : disabledLikeSrc,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(ArticlesLikesCount, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }, favoritesCount))), /*#__PURE__*/React.createElement(ArticlesTagsWrap, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, renderTagList()), /*#__PURE__*/React.createElement(ArticlesDescription, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, description)), /*#__PURE__*/React.createElement(ArticlesUserInfoWrap, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ArticlesUserInfo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ArticlesUserInfoGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ArticlesUsername, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, author.username), /*#__PURE__*/React.createElement(ArticlesDate, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, dateDiff)), /*#__PURE__*/React.createElement(ArticlesUserImage, {\n      src: author.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    })), renderAuthorOptions()));\n  };\n\n  return articles.length === 0 ? renderArticle(oneArticle) : renderArticle(articles);\n};\n\nexport default connect(mapStateToProps, actionCreator)(Article);","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/components/article/index.js"],"names":["React","useEffect","Link","useParams","actions","getDate","connect","ArtickesLikeImg","ArticlesDate","ArticlesDescription","ArticlesHeader","ArticlesInfo","ArticlesItem","ArticlesLikesCount","ArticlesStats","ArticlesTag","ArticlesTagsWrap","articlesTitle","ArticlesUserImage","ArticlesUserInfo","ArticlesUserInfoGroup","ArticlesUsername","ArticleAuthorOptions","ArticleDeleteButton","ArticleEditButton","ArticlesUserInfoWrap","LoaderWrapper","articleUrl","Loader","mapStateToProps","state","articles","userData","oneArticle","oneArticleState","username","isOneArticleReady","actionCreator","getOneArticle","Article","props","slug","validSlug","slice","length","renderLoader","renderArticle","data","article","Array","isArray","find","el","author","createdAt","description","favoritesCount","favorited","id","tagList","title","isCurrentUserAuthor","dateDiff","renderTagList","map","tag","renderAuthorOptions","activeLikeSrc","disabledLikeSrc","image"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport * as actions from '../../redux/actions';\nimport { getDate } from '../../helper';\nimport { connect } from 'react-redux';\nimport {\n  ArtickesLikeImg, ArticlesDate, ArticlesDescription,\n  ArticlesHeader,\n  ArticlesInfo, ArticlesItem, ArticlesLikesCount,\n  ArticlesStats, ArticlesTag, ArticlesTagsWrap,\n  articlesTitle, ArticlesUserImage, ArticlesUserInfo, ArticlesUserInfoGroup, ArticlesUsername,\n  ArticleAuthorOptions, ArticleDeleteButton, ArticleEditButton, ArticlesUserInfoWrap, LoaderWrapper,\n} from '../../styled-components';\nimport { articleUrl } from '../../routes';\nimport disabledLikeSrc from '../../images/like-disabled.svg';\nimport activeLikeSrc from '../../images/like-active.svg';\nimport Loader from 'react-loader-spinner';\n\nconst mapStateToProps = (state) => {\n  const { articles, userData, oneArticle, oneArticleState } = state;\n\n  return {\n    articles,\n    username: userData.username,\n    isOneArticleReady: (oneArticleState === 'finished'),\n    oneArticle,\n  };\n}\n\nconst actionCreator = {\n  getOneArticle: actions.getOneArticle,\n}\n\n\nconst Article = (props) => {\n  const { articles, username, getOneArticle, oneArticle, isOneArticleReady} = props;\n  const { slug } = useParams();\n  const validSlug = slug.slice(1, slug.length);\n\n\n  const renderLoader = () => (\n    <LoaderWrapper>\n      <Loader type=\"Oval\" color=\"rgb(82, 196, 26)\" height={200} width={200} />\n    </LoaderWrapper>\n  );\n  useEffect(() => {\n    if (articles.length === 0) {\n      getOneArticle(validSlug);\n    }\n  }, []);\n\n\n  const renderArticle = (data) => {\n    let article;\n\n    if (Array.isArray(data)) {\n      article = data.find((el) => el.slug === validSlug);\n    }\n    if (!Array.isArray(data)) {\n      if (!isOneArticleReady) return renderLoader();\n      article = data;\n    }\n\n    const { author, createdAt, description, favoritesCount, favorited, id, tagList, title } = article;\n    const isCurrentUserAuthor = (username === author.username);\n\n    const dateDiff = getDate(createdAt);\n\n    const renderTagList = () => (\n      tagList.map((tag) => <ArticlesTag key={tag.id}>{tag.title}</ArticlesTag>)\n    );\n\n    const renderAuthorOptions = () => {\n      if (!isCurrentUserAuthor) return false;\n      return (\n        <ArticleAuthorOptions>\n          <ArticleDeleteButton>test</ArticleDeleteButton>\n          <ArticleEditButton>test</ArticleEditButton>\n        </ArticleAuthorOptions>\n      );\n    };\n\n    return (\n      <ArticlesItem >\n       <ArticlesInfo>\n          <ArticlesHeader>\n            <Link style={articlesTitle} to={articleUrl(slug)}>\n              {title}\n            </Link>\n            <ArticlesStats>\n              <ArtickesLikeImg src={favorited ? activeLikeSrc : disabledLikeSrc} />\n              <ArticlesLikesCount>{favoritesCount}</ArticlesLikesCount>\n            </ArticlesStats>\n          </ArticlesHeader>\n          <ArticlesTagsWrap>\n            {renderTagList()}\n          </ArticlesTagsWrap>\n\n          <ArticlesDescription>\n            {description}\n          </ArticlesDescription>\n        </ArticlesInfo>\n\n        <ArticlesUserInfoWrap>\n          <ArticlesUserInfo>\n            <ArticlesUserInfoGroup>\n              <ArticlesUsername>{author.username}</ArticlesUsername>\n              <ArticlesDate>{dateDiff}</ArticlesDate>\n            </ArticlesUserInfoGroup>\n            <ArticlesUserImage src={author.image} />\n          </ArticlesUserInfo>\n          {renderAuthorOptions()}\n        </ArticlesUserInfoWrap>\n      </ArticlesItem>\n    );\n  }\n\n  return (articles.length === 0) ? renderArticle(oneArticle) : renderArticle(articles);\n};\n\nexport default connect(mapStateToProps, actionCreator)(Article);\n"]},"metadata":{},"sourceType":"module"}