{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import*as routes from'./routes';import{checkFieldErrors,mainRequestHandler,networkErrorCheck,signInErrorsCheck}from'./index';axios.interceptors.request.use(function(req){return mainRequestHandler(req);});// авторизация\nexport var signInProcess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userData,formik){var response,responseUserData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(routes.signInUrl,userData);case 3:response=_context.sent;responseUserData=response.data.user;return _context.abrupt(\"return\",{username:responseUserData.username,token:responseUserData.token,isAuthorized:true,userProfileImage:responseUserData.image});case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);networkErrorCheck(_context.t0);if(_context.t0.response.status===422){signInErrorsCheck(_context.t0.response.data.errors,formik);}throw _context.t0;case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function signInProcess(_x,_x2){return _ref.apply(this,arguments);};}();// регистрация\nexport var signUpProcess=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newUser,formik){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(routes.signUpUrl,newUser);case 3:alert('Регистрация прошла успешно');// eslint-disable-line no-alert\n_context2.next=11;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);networkErrorCheck(_context2.t0);if(_context2.t0.response.status===422){checkFieldErrors(_context2.t0.response.data.errors,formik);}throw _context2.t0;case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function signUpProcess(_x3,_x4){return _ref2.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/API/auth.js"],"names":["axios","routes","checkFieldErrors","mainRequestHandler","networkErrorCheck","signInErrorsCheck","interceptors","request","use","req","signInProcess","userData","formik","post","signInUrl","response","responseUserData","data","user","username","token","isAuthorized","userProfileImage","image","status","errors","signUpProcess","newUser","signUpUrl","alert"],"mappings":"yTAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,MAAZ,KAAwB,UAAxB,CACA,OACEC,gBADF,CAEEC,kBAFF,CAGEC,iBAHF,CAIEC,iBAJF,KAKO,SALP,CAOAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,SAACC,GAAD,QAASN,CAAAA,kBAAkB,CAACM,GAAD,CAA3B,EADF,EAIA;AACA,MAAO,IAAMC,CAAAA,aAAa,0FAAG,iBAAOC,QAAP,CAAiBC,MAAjB,sLAEFZ,CAAAA,KAAK,CAACa,IAAN,CAAWZ,MAAM,CAACa,SAAlB,CAA6BH,QAA7B,CAFE,QAEnBI,QAFmB,eAGnBC,gBAHmB,CAGAD,QAAQ,CAACE,IAAT,CAAcC,IAHd,iCAIlB,CACLC,QAAQ,CAAEH,gBAAgB,CAACG,QADtB,CAELC,KAAK,CAAEJ,gBAAgB,CAACI,KAFnB,CAGLC,YAAY,CAAE,IAHT,CAILC,gBAAgB,CAAEN,gBAAgB,CAACO,KAJ9B,CAJkB,0DAWzBnB,iBAAiB,aAAjB,CACA,GAAI,YAAMW,QAAN,CAAeS,MAAf,GAA0B,GAA9B,CAAmC,CACjCnB,iBAAiB,CAAC,YAAMU,QAAN,CAAeE,IAAf,CAAoBQ,MAArB,CAA6Bb,MAA7B,CAAjB,CACD,CAdwB,sFAAH,kBAAbF,CAAAA,aAAa,gDAAnB,CAmBP;AACA,MAAO,IAAMgB,CAAAA,aAAa,2FAAG,kBAAOC,OAAP,CAAgBf,MAAhB,8JAEnBZ,CAAAA,KAAK,CAACa,IAAN,CAAWZ,MAAM,CAAC2B,SAAlB,CAA6BD,OAA7B,CAFmB,QAGzBE,KAAK,CAAC,4BAAD,CAAL,CAAqC;AAHZ,mFAKzBzB,iBAAiB,cAAjB,CACA,GAAI,aAAMW,QAAN,CAAeS,MAAf,GAA0B,GAA9B,CAAmC,CACjCtB,gBAAgB,CAAC,aAAMa,QAAN,CAAeE,IAAf,CAAoBQ,MAArB,CAA6Bb,MAA7B,CAAhB,CACD,CARwB,yFAAH,kBAAbc,CAAAA,aAAa,kDAAnB","sourcesContent":["import axios from 'axios';\nimport * as routes from './routes';\nimport {\n  checkFieldErrors,\n  mainRequestHandler,\n  networkErrorCheck,\n  signInErrorsCheck,\n} from './index';\n\naxios.interceptors.request.use(\n  (req) => mainRequestHandler(req),\n);\n\n// авторизация\nexport const signInProcess = async (userData, formik) => {\n  try {\n    const response = await axios.post(routes.signInUrl, userData);\n    const responseUserData = response.data.user;\n    return {\n      username: responseUserData.username,\n      token: responseUserData.token,\n      isAuthorized: true,\n      userProfileImage: responseUserData.image,\n    };\n  } catch (error) {\n    networkErrorCheck(error);\n    if (error.response.status === 422) {\n      signInErrorsCheck(error.response.data.errors, formik);\n    }\n    throw error;\n  }\n};\n\n// регистрация\nexport const signUpProcess = async (newUser, formik) => {\n  try {\n    await axios.post(routes.signUpUrl, newUser);\n    alert('Регистрация прошла успешно'); // eslint-disable-line no-alert\n  } catch (error) {\n    networkErrorCheck(error);\n    if (error.response.status === 422) {\n      checkFieldErrors(error.response.data.errors, formik);\n    }\n    throw error;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}