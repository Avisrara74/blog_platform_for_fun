{"ast":null,"code":"import { createAction } from 'redux-actions';\nimport * as api from '../../API';\nexport const signUpRequest = createAction('SIGN_UP_REQUEST');\nexport const signUpSuccess = createAction('SIGN_UP_SUCCESS');\nexport const signUpFailure = createAction('SIGN_UP_FAILURE'); // регистрация\n\nexport const signUp = (newUserData, formik) => async dispatch => {\n  dispatch(signUpRequest());\n\n  try {\n    await api.signUpProcess(newUserData, formik);\n    dispatch(signUpSuccess());\n  } catch (err) {\n    dispatch(signUpFailure());\n  }\n};\nexport const signInRequest = createAction('LOG_IN_REQUEST');\nexport const signInSuccess = createAction('LOG_IN_SUCCESS');\nexport const signInFailure = createAction('LOG_IN_FAILURE'); // авторизация\n\nexport const signIn = (userData, formik) => async dispatch => {\n  dispatch(signInRequest());\n\n  try {\n    const responseUserData = await api.signInProcess(userData, formik);\n    dispatch(signInSuccess(responseUserData));\n  } catch (err) {\n    dispatch(signInFailure());\n  }\n};\nexport const logOutSuccess = createAction('LOGOUT_SUCCESS');\nexport const getArticlesSuccess = createAction('GET_ARTICLES_SUCCESS');\nexport const getArticles = () => async dispatch => {\n  let articlesCounter = 0;\n\n  const fetchArticles = async counter => {\n    const response = await api.getArticles(counter);\n    const {\n      articles,\n      articlesCount\n    } = response;\n    console.log(response);\n    dispatch(getArticlesSuccess(response));\n    articlesCounter += articlesCount;\n    console.log(articlesCounter);\n\n    if (articles.length < articlesCount) {// await fetchArticles(articlesCounter);\n    }\n  };\n\n  try {\n    await fetchArticles();\n  } catch (error) {\n    console.log(error.response);\n  }\n};","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/redux/actions/index.js"],"names":["createAction","api","signUpRequest","signUpSuccess","signUpFailure","signUp","newUserData","formik","dispatch","signUpProcess","err","signInRequest","signInSuccess","signInFailure","signIn","userData","responseUserData","signInProcess","logOutSuccess","getArticlesSuccess","getArticles","articlesCounter","fetchArticles","counter","response","articles","articlesCount","console","log","length","error"],"mappings":"AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,OAAO,KAAKC,GAAZ,MAAqB,WAArB;AAEA,OAAO,MAAMC,aAAa,GAAGF,YAAY,CAAC,iBAAD,CAAlC;AACP,OAAO,MAAMG,aAAa,GAAGH,YAAY,CAAC,iBAAD,CAAlC;AACP,OAAO,MAAMI,aAAa,GAAGJ,YAAY,CAAC,iBAAD,CAAlC,C,CAEP;;AACA,OAAO,MAAMK,MAAM,GAAG,CAACC,WAAD,EAAcC,MAAd,KAAyB,MAAOC,QAAP,IAAoB;AACjEA,EAAAA,QAAQ,CAACN,aAAa,EAAd,CAAR;;AACA,MAAI;AACF,UAAMD,GAAG,CAACQ,aAAJ,CAAkBH,WAAlB,EAA+BC,MAA/B,CAAN;AACAC,IAAAA,QAAQ,CAACL,aAAa,EAAd,CAAR;AACD,GAHD,CAGE,OAAOO,GAAP,EAAY;AACZF,IAAAA,QAAQ,CAACJ,aAAa,EAAd,CAAR;AACD;AACF,CARM;AAUP,OAAO,MAAMO,aAAa,GAAGX,YAAY,CAAC,gBAAD,CAAlC;AACP,OAAO,MAAMY,aAAa,GAAGZ,YAAY,CAAC,gBAAD,CAAlC;AACP,OAAO,MAAMa,aAAa,GAAGb,YAAY,CAAC,gBAAD,CAAlC,C,CAEP;;AACA,OAAO,MAAMc,MAAM,GAAG,CAACC,QAAD,EAAWR,MAAX,KAAsB,MAAOC,QAAP,IAAoB;AAC9DA,EAAAA,QAAQ,CAACG,aAAa,EAAd,CAAR;;AACA,MAAI;AACF,UAAMK,gBAAgB,GAAG,MAAMf,GAAG,CAACgB,aAAJ,CAAkBF,QAAlB,EAA4BR,MAA5B,CAA/B;AACAC,IAAAA,QAAQ,CAACI,aAAa,CAACI,gBAAD,CAAd,CAAR;AACD,GAHD,CAGE,OAAON,GAAP,EAAY;AACZF,IAAAA,QAAQ,CAACK,aAAa,EAAd,CAAR;AACD;AACF,CARM;AAUP,OAAO,MAAMK,aAAa,GAAGlB,YAAY,CAAC,gBAAD,CAAlC;AAEP,OAAO,MAAMmB,kBAAkB,GAAGnB,YAAY,CAAC,sBAAD,CAAvC;AACP,OAAO,MAAMoB,WAAW,GAAG,MAAM,MAAOZ,QAAP,IAAoB;AACnD,MAAIa,eAAe,GAAG,CAAtB;;AACA,QAAMC,aAAa,GAAG,MAAOC,OAAP,IAAmB;AACvC,UAAMC,QAAQ,GAAG,MAAMvB,GAAG,CAACmB,WAAJ,CAAgBG,OAAhB,CAAvB;AACA,UAAM;AAAEE,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA8BF,QAApC;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACAhB,IAAAA,QAAQ,CAACW,kBAAkB,CAACK,QAAD,CAAnB,CAAR;AACAH,IAAAA,eAAe,IAAIK,aAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,eAAZ;;AACA,QAAII,QAAQ,CAACI,MAAT,GAAkBH,aAAtB,EAAqC,CACnC;AACD;AACF,GAVD;;AAYA,MAAI;AACF,UAAMJ,aAAa,EAAnB;AACD,GAFD,CAEE,OAAOQ,KAAP,EAAc;AACdH,IAAAA,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACN,QAAlB;AACD;AACF,CAnBM","sourcesContent":["import { createAction } from 'redux-actions';\nimport * as api from '../../API';\n\nexport const signUpRequest = createAction('SIGN_UP_REQUEST');\nexport const signUpSuccess = createAction('SIGN_UP_SUCCESS');\nexport const signUpFailure = createAction('SIGN_UP_FAILURE');\n\n// регистрация\nexport const signUp = (newUserData, formik) => async (dispatch) => {\n  dispatch(signUpRequest());\n  try {\n    await api.signUpProcess(newUserData, formik);\n    dispatch(signUpSuccess());\n  } catch (err) {\n    dispatch(signUpFailure());\n  }\n};\n\nexport const signInRequest = createAction('LOG_IN_REQUEST');\nexport const signInSuccess = createAction('LOG_IN_SUCCESS');\nexport const signInFailure = createAction('LOG_IN_FAILURE');\n\n// авторизация\nexport const signIn = (userData, formik) => async (dispatch) => {\n  dispatch(signInRequest());\n  try {\n    const responseUserData = await api.signInProcess(userData, formik);\n    dispatch(signInSuccess(responseUserData));\n  } catch (err) {\n    dispatch(signInFailure());\n  }\n};\n\nexport const logOutSuccess = createAction('LOGOUT_SUCCESS');\n\nexport const getArticlesSuccess = createAction('GET_ARTICLES_SUCCESS');\nexport const getArticles = () => async (dispatch) => {\n  let articlesCounter = 0;\n  const fetchArticles = async (counter) => {\n    const response = await api.getArticles(counter);\n    const { articles, articlesCount } = response;\n    console.log(response);\n    dispatch(getArticlesSuccess(response));\n    articlesCounter += articlesCount;\n    console.log(articlesCounter);\n    if (articles.length < articlesCount) {\n      // await fetchArticles(articlesCounter);\n    }\n  };\n\n  try {\n    await fetchArticles();\n  } catch (error) {\n    console.log(error.response);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}