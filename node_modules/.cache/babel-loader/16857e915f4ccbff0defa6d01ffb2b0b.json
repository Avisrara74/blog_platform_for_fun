{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";var _handleActions,_handleActions2;import{handleActions}from'redux-actions';import*as userActions from'../actions/user';import*as articlesActions from'../actions/articles';import*as authActions from'../actions/auth';import{removeItemFromLocalstorage,setItemToLocalstorage}from'../../localstorage';var userDataInitial={username:'',token:'',isAuthorized:false,userProfileImage:undefined};export var userData=handleActions((_handleActions={},_defineProperty(_handleActions,authActions.signInSuccess,function(state,action){var _action$payload=action.payload,username=_action$payload.username,token=_action$payload.token,isAuthorized=_action$payload.isAuthorized,userProfileImage=_action$payload.userProfileImage;setItemToLocalstorage('token',token);setItemToLocalstorage('username',username);setItemToLocalstorage('userProfileImage',userProfileImage);return{username:username,token:token,isAuthorized:isAuthorized,userProfileImage:userProfileImage};}),_defineProperty(_handleActions,userActions.editUserProfileSuccess,function(state,action){var _action$payload2=action.payload,username=_action$payload2.username,userProfileImage=_action$payload2.userProfileImage;removeItemFromLocalstorage('username');setItemToLocalstorage('username',username);removeItemFromLocalstorage('userProfileImage');setItemToLocalstorage('userProfileImage',userProfileImage);return{username:username,userProfileImage:userProfileImage};}),_defineProperty(_handleActions,authActions.logOutSuccess,function(){removeItemFromLocalstorage('token');removeItemFromLocalstorage('username');return userDataInitial;}),_handleActions),userDataInitial);export var articles=handleActions((_handleActions2={},_defineProperty(_handleActions2,articlesActions.getArticlesProcess,function(state,action){return[].concat(_toConsumableArray(state),_toConsumableArray(action.payload));}),_defineProperty(_handleActions2,articlesActions.refreshLikeInArticlesArray,function(state,_ref){var payload=_ref.payload;var currentArticleIndex=state.findIndex(function(el){return el.id===payload;});var currentArticle=state[currentArticleIndex];var changedArticle=_objectSpread(_objectSpread({},currentArticle),{},{favorited:!currentArticle.favorited,favoritesCount:currentArticle.favorited?currentArticle.favoritesCount-1:currentArticle.favoritesCount+1});return[].concat(_toConsumableArray(state.slice(0,currentArticleIndex)),[changedArticle],_toConsumableArray(state.slice(currentArticleIndex+1)));}),_defineProperty(_handleActions2,articlesActions.createArticleSuccess,function(){return[];}),_defineProperty(_handleActions2,articlesActions.editArticleSuccess,function(){return[];}),_defineProperty(_handleActions2,articlesActions.removeArticleSuccess,function(){return[];}),_handleActions2),[]);export var oneArticle=handleActions(_defineProperty({},articlesActions.getOneArticleSuccess,function(state,action){return _objectSpread({},action.payload);}),{});export var likesStateOnServer=handleActions(_defineProperty({},articlesActions.addLikeSuccess,function(state,action){var elAlreadyHave=state.some(function(el){return el.id===action.payload.id;});if(elAlreadyHave){var newState=state.map(function(el){return el.id===action.payload.id?_objectSpread(_objectSpread({},el),{},{isFavorited:action.payload.isFavorited}):el;});return _toConsumableArray(newState);}return[].concat(_toConsumableArray(state),[_objectSpread({},action.payload)]);}),[]);","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/redux/reducers/dataReducers.js"],"names":["handleActions","userActions","articlesActions","authActions","removeItemFromLocalstorage","setItemToLocalstorage","userDataInitial","username","token","isAuthorized","userProfileImage","undefined","userData","signInSuccess","state","action","payload","editUserProfileSuccess","logOutSuccess","articles","getArticlesProcess","refreshLikeInArticlesArray","currentArticleIndex","findIndex","el","id","currentArticle","changedArticle","favorited","favoritesCount","slice","createArticleSuccess","editArticleSuccess","removeArticleSuccess","oneArticle","getOneArticleSuccess","likesStateOnServer","addLikeSuccess","elAlreadyHave","some","newState","map","isFavorited"],"mappings":"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","sourcesContent":["import { handleActions } from 'redux-actions';\nimport * as userActions from '../actions/user';\nimport * as articlesActions from '../actions/articles';\nimport * as authActions from '../actions/auth';\n\nimport { removeItemFromLocalstorage, setItemToLocalstorage } from '../../localstorage';\n\nconst userDataInitial = {\n  username: '', token: '', isAuthorized: false, userProfileImage: undefined,\n};\nexport const userData = handleActions({\n  [authActions.signInSuccess](state, action) {\n    const {\n      username, token, isAuthorized, userProfileImage,\n    } = action.payload;\n    setItemToLocalstorage('token', token);\n    setItemToLocalstorage('username', username);\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return {\n      username, token, isAuthorized, userProfileImage,\n    };\n  },\n  [userActions.editUserProfileSuccess](state, action) {\n    const { username, userProfileImage } = action.payload;\n    removeItemFromLocalstorage('username');\n    setItemToLocalstorage('username', username);\n    removeItemFromLocalstorage('userProfileImage');\n    setItemToLocalstorage('userProfileImage', userProfileImage);\n    return { username, userProfileImage };\n  },\n  [authActions.logOutSuccess]() {\n    removeItemFromLocalstorage('token');\n    removeItemFromLocalstorage('username');\n    return userDataInitial;\n  },\n}, userDataInitial);\n\nexport const articles = handleActions({\n  [articlesActions.getArticlesProcess](state, action) {\n    return [...state, ...action.payload];\n  },\n  [articlesActions.refreshLikeInArticlesArray](state, { payload }) {\n    const currentArticleIndex = state.findIndex((el) => el.id === payload);\n    const currentArticle = state[currentArticleIndex];\n    const changedArticle = {\n      ...currentArticle,\n      favorited: !currentArticle.favorited,\n      favoritesCount: (currentArticle.favorited)\n        ? currentArticle.favoritesCount - 1\n        : currentArticle.favoritesCount + 1,\n    };\n    return [\n      ...state.slice(0, currentArticleIndex),\n      changedArticle,\n      ...state.slice(currentArticleIndex + 1),\n    ];\n  },\n  [articlesActions.createArticleSuccess]() {\n    return [];\n  },\n  [articlesActions.editArticleSuccess]() {\n    return [];\n  },\n  [articlesActions.removeArticleSuccess]() {\n    return [];\n  },\n}, []);\n\nexport const oneArticle = handleActions({\n  [articlesActions.getOneArticleSuccess](state, action) {\n    return { ...action.payload };\n  },\n}, {});\n\nexport const likesStateOnServer = handleActions({\n  [articlesActions.addLikeSuccess](state, action) {\n    const elAlreadyHave = state.some((el) => el.id === action.payload.id);\n    if (elAlreadyHave) {\n      const newState = state.map((el) => (\n        (el.id === action.payload.id) ? { ...el, isFavorited: action.payload.isFavorited } : el\n      ));\n      return [...newState];\n    }\n    return [...state, { ...action.payload }];\n  },\n}, []);\n"]},"metadata":{},"sourceType":"module"}