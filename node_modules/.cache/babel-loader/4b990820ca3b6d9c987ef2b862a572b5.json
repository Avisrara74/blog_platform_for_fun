{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\stalk\\\\jm-blog-platform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{uniqueId}from'lodash';import{connect}from'react-redux';import{useFormik}from'formik';import{Button,Input,Checkbox}from'antd';import*as Yup from'yup';import{useHistory}from'react-router';import{Link}from'react-router-dom';import{signInUrl}from'../../routes';import'antd/dist/antd.css';import{signUp as signUpProcess}from'../../redux/actions/auth';import{FormItem,Form,FormCheckboxWrap,FormCheckboxTitle,FormSignInLink,FormTitle,FormSubmitButtonStyles}from'../../styled-components';import{renderErrorMessage}from'../../helper';var formikInicialValues={username:'',email:'',password:'',repeatPassword:'',acceptTerms:false};var formItems=[{id:uniqueId(),title:'Username',name:'username',placeholder:'Username',type:'text'},{id:uniqueId(),title:'Email address',name:'email',placeholder:'Email',type:'text'},{id:uniqueId(),title:'Password',name:'password',placeholder:'Password',type:'password'},{id:uniqueId(),title:'Repeat Password',name:'repeatPassword',placeholder:'Repeat password',type:'password'}];var formikValidationSchema=Yup.object({username:Yup.string().max(30,'Your username should be no more than 30 characters!').required('required'),email:Yup.string().email('Invalid email').required('required'),password:Yup.string().min(8,'Your password need to be at least 6 characters.').max(50,'Your password should be no more than 50 characters.').matches(/^[A-Za-z0-9]+$/,'Password can be only with latin symbols and numbers').matches(/(?=.*[0-9])/,'Your password need to be at least 1 number').matches(/(?=.*[A-Z])/,'Your password need to be at least 1 uppercase symbol').required('required'),repeatPassword:Yup.string().oneOf([Yup.ref('password'),null],'Passwords must match').required('required'),acceptTerms:Yup.bool().oneOf([true]).required('You should accept terms')});var mapStateToProps=function mapStateToProps(state){var signUpState=state.signUpState;var isInputsDisable=signUpState==='requested';var isUserRegistered=signUpState==='finished';return{isInputsDisable:isInputsDisable,signUpState:signUpState,isUserRegistered:isUserRegistered};};var actionCreators={signUp:signUpProcess};var SignUp=function SignUp(props){var isUserRegistered=props.isUserRegistered,isInputsDisable=props.isInputsDisable,signUp=props.signUp;var history=useHistory();var redirectToSignIn=function redirectToSignIn(){history.push(signInUrl);};var handleOnSignUp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formik){var _formik$values,username,email,password,newUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_formik$values=formik.values,username=_formik$values.username,email=_formik$values.email,password=_formik$values.password;newUser={user:{username:username,email:email,password:password}};signUp(newUser,formik);case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleOnSignUp(_x){return _ref.apply(this,arguments);};}();var formik=useFormik({initialValues:formikInicialValues,validationSchema:formikValidationSchema,onSubmit:function onSubmit(){handleOnSignUp(formik);}});var renderInputs=function renderInputs(){return formItems.map(function(formItem){return/*#__PURE__*/React.createElement(FormItem,{key:formItem.id,htmlFor:formItem.name},formItem.title,/*#__PURE__*/React.createElement(Input,{type:formItem.type,placeholder:formItem.placeholder,id:formItem.name,name:formItem.name,onChange:formik.handleChange,value:formik.values[formItem.name],disabled:isInputsDisable}),renderErrorMessage(formik,formItem.name));});};useEffect(function(){if(isUserRegistered)redirectToSignIn();},[isUserRegistered]);return/*#__PURE__*/React.createElement(Form,{onSubmit:formik.handleSubmit},/*#__PURE__*/React.createElement(FormTitle,null,\"Create new account\"),renderInputs(),/*#__PURE__*/React.createElement(FormItem,null,/*#__PURE__*/React.createElement(FormCheckboxWrap,null,/*#__PURE__*/React.createElement(Checkbox,{id:\"acceptTerms\",name:\"acceptTerms\",checked:formik.values.acceptTerms,onChange:formik.handleChange,disabled:isInputsDisable}),/*#__PURE__*/React.createElement(FormCheckboxTitle,{htmlFor:\"acceptTerms\"},\"I agree to the processing of my personal information\")),renderErrorMessage(formik,'acceptTerms')),/*#__PURE__*/React.createElement(FormItem,null,/*#__PURE__*/React.createElement(Button,{htmlType:\"submit\",type:\"primary\",onClick:formik.handleSubmit,disabled:isInputsDisable,style:FormSubmitButtonStyles},\"Create\")),/*#__PURE__*/React.createElement(FormSignInLink,null,/*#__PURE__*/React.createElement(\"span\",null,\"Already have account?\"),/*#__PURE__*/React.createElement(Link,{to:signInUrl},\" Sign In.\")));};SignUp.defaultProps={signUp:null,isInputsDisable:false,isUserRegistered:false};export default connect(mapStateToProps,actionCreators)(SignUp);","map":{"version":3,"sources":["C:/Users/stalk/jm-blog-platform/src/components/sign-up/index.js"],"names":["React","useEffect","uniqueId","connect","useFormik","Button","Input","Checkbox","Yup","useHistory","Link","signInUrl","signUp","signUpProcess","FormItem","Form","FormCheckboxWrap","FormCheckboxTitle","FormSignInLink","FormTitle","FormSubmitButtonStyles","renderErrorMessage","formikInicialValues","username","email","password","repeatPassword","acceptTerms","formItems","id","title","name","placeholder","type","formikValidationSchema","object","string","max","required","min","matches","oneOf","ref","bool","mapStateToProps","state","signUpState","isInputsDisable","isUserRegistered","actionCreators","SignUp","props","history","redirectToSignIn","push","handleOnSignUp","formik","values","newUser","user","initialValues","validationSchema","onSubmit","renderInputs","map","formItem","handleChange","handleSubmit","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { uniqueId } from 'lodash';\nimport { connect } from 'react-redux';\nimport { useFormik } from 'formik';\nimport { Button, Input, Checkbox } from 'antd';\nimport propTypes from 'prop-types';\nimport * as Yup from 'yup';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { signInUrl } from '../../routes';\nimport 'antd/dist/antd.css';\nimport { signUp as signUpProcess } from '../../redux/actions/auth';\nimport {\n  FormItem,\n  Form,\n  FormCheckboxWrap,\n  FormCheckboxTitle,\n  FormSignInLink,\n  FormTitle,\n  FormSubmitButtonStyles,\n} from '../../styled-components';\nimport { renderErrorMessage } from '../../helper';\n\nconst formikInicialValues = {\n  username: '',\n  email: '',\n  password: '',\n  repeatPassword: '',\n  acceptTerms: false,\n};\n\nconst formItems = [\n  {\n    id: uniqueId(), title: 'Username', name: 'username', placeholder: 'Username', type: 'text',\n  },\n  {\n    id: uniqueId(), title: 'Email address', name: 'email', placeholder: 'Email', type: 'text',\n  },\n  {\n    id: uniqueId(), title: 'Password', name: 'password', placeholder: 'Password', type: 'password',\n  },\n  {\n    id: uniqueId(), title: 'Repeat Password', name: 'repeatPassword', placeholder: 'Repeat password', type: 'password',\n  },\n];\n\nconst formikValidationSchema = Yup.object({\n  username: Yup.string()\n    .max(30, 'Your username should be no more than 30 characters!')\n    .required('required'),\n  email: Yup.string()\n    .email('Invalid email')\n    .required('required'),\n  password: Yup.string()\n    .min(8, 'Your password need to be at least 6 characters.')\n    .max(50, 'Your password should be no more than 50 characters.')\n    .matches(/^[A-Za-z0-9]+$/, 'Password can be only with latin symbols and numbers')\n    .matches(/(?=.*[0-9])/, 'Your password need to be at least 1 number')\n    .matches(/(?=.*[A-Z])/, 'Your password need to be at least 1 uppercase symbol')\n    .required('required'),\n  repeatPassword: Yup.string()\n    .oneOf([Yup.ref('password'), null], 'Passwords must match')\n    .required('required'),\n  acceptTerms: Yup.bool()\n    .oneOf([true])\n    .required('You should accept terms'),\n});\n\nconst mapStateToProps = (state) => {\n  const { signUpState } = state;\n  const isInputsDisable = (signUpState === 'requested');\n  const isUserRegistered = (signUpState === 'finished');\n\n  return { isInputsDisable, signUpState, isUserRegistered };\n};\n\nconst actionCreators = {\n  signUp: signUpProcess,\n};\n\nconst SignUp = (props) => {\n  const { isUserRegistered, isInputsDisable, signUp } = props;\n\n  const history = useHistory();\n  const redirectToSignIn = () => {\n    history.push(signInUrl);\n  };\n\n  const handleOnSignUp = async (formik) => {\n    const { username, email, password } = formik.values;\n    const newUser = {\n      user: {\n        username,\n        email,\n        password,\n      },\n    };\n    signUp(newUser, formik);\n  };\n\n  const formik = useFormik({\n    initialValues: formikInicialValues,\n    validationSchema: formikValidationSchema,\n    onSubmit: () => {\n      handleOnSignUp(formik);\n    },\n  });\n\n  const renderInputs = () => (\n    formItems.map((formItem) => (\n      <FormItem key={formItem.id} htmlFor={formItem.name}>\n        {formItem.title}\n        <Input\n          type={formItem.type}\n          placeholder={formItem.placeholder}\n          id={formItem.name}\n          name={formItem.name}\n          onChange={formik.handleChange}\n          value={formik.values[formItem.name]}\n          disabled={isInputsDisable}\n        />\n        {renderErrorMessage(formik, formItem.name)}\n      </FormItem>\n    ))\n  );\n\n  useEffect(() => {\n    if (isUserRegistered) redirectToSignIn();\n  }, [isUserRegistered]);\n\n  return (\n    <Form onSubmit={formik.handleSubmit}>\n      <FormTitle>Create new account</FormTitle>\n\n      {renderInputs()}\n\n      <FormItem>\n        <FormCheckboxWrap>\n          <Checkbox\n            id=\"acceptTerms\"\n            name=\"acceptTerms\"\n            checked={formik.values.acceptTerms}\n            onChange={formik.handleChange}\n            disabled={isInputsDisable}\n          />\n          <FormCheckboxTitle\n            htmlFor=\"acceptTerms\"\n          >\n            I agree to the processing of my personal information\n          </FormCheckboxTitle>\n        </FormCheckboxWrap>\n        {renderErrorMessage(formik, 'acceptTerms')}\n      </FormItem>\n\n      <FormItem>\n        <Button\n          htmlType=\"submit\"\n          type=\"primary\"\n          onClick={formik.handleSubmit}\n          disabled={isInputsDisable}\n          style={FormSubmitButtonStyles}\n        >\n          Create\n        </Button>\n      </FormItem>\n\n      <FormSignInLink>\n        <span>Already have account?</span>\n        <Link to={signInUrl}> Sign In.</Link>\n      </FormSignInLink>\n    </Form>\n  );\n};\n\nSignUp.propTypes = {\n  signUp: propTypes.func,\n  isInputsDisable: propTypes.bool,\n  isUserRegistered: propTypes.bool,\n};\n\nSignUp.defaultProps = {\n  signUp: null,\n  isInputsDisable: false,\n  isUserRegistered: false,\n};\n\nexport default connect(mapStateToProps, actionCreators)(SignUp);\n"]},"metadata":{},"sourceType":"module"}